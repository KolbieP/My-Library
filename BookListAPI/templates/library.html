<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kolbie's Library</title>
    {% load static %}
    <link rel="stylesheet" type="text/css" href="{% static 'style.css' %}">
</head>

<body>
    <nav class="top-nav">
        <div class="logo">
            <img src="{% static 'white-logo.png' %}" alt="Logo">
        </div>
        <ul class="nav-links">
            <li><a href="{% url 'index' %}" class="nav-link">Home</a></li>
            <li><a href="{% url 'book' %}" class="nav-link active">Library</a></li>
        </ul>
    </nav>
    <div class="main-image">
        <h1 class="main">Book Collection</h1>
    </div>

    <div class="group">
        <h2>My Personal Library</h2>
        <p>Welcome to My Personal Library! Here is a curated collection of all the books I've ever read designed to
            inspire fellow book lovers and provide a comprehensive record of my literary journey. Here, you can explore
            a diverse range of genres, discover new favorites, and track your own reading progress alongside mine. Dive
            into the world of books and let the stories ignite your imagination!</p>
    </div>
    <div class="book-button-container">
        <button class="book-button" onclick="toggleLibrary()">Display Library</button>
    </div>
    <div class="book-display" id="bookDisplay" style="display: none; text-align: center;">
        {% if book %}
        <div class="book-container">
            <table class="book-table">
                <thead>
                    <tr>
                        <th>Title</th>
                        <th>Author</th>
                        <th>Rating</th>
                    </tr>
                </thead>
                <tbody>
                    {% for Book in book %}
                    <tr>
                        <td>{{ Book.title }}</td>
                        <td>{{ Book.author }}</td>
                        <td>{{ Book.rating }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% endif %}
    </div>
    <div class="search">
        <input type="text" id="searchInput" placeholder="Search for a book...">
        <button onclick="searchBooks()">Search</button>
        <div id="searchResults">
            <!-- Search results will be displayed here -->
        </div>
    </div>
    <footer class="top-nav">
        <div class="logo">
            <img src="{% static 'white-logo.png' %}" alt="Logo">
        </div>
        <ul class="nav-links">
            <li><a href="{% url 'index' %}" class="nav-link">Home</a></li>
            <li><a href="{% url 'book' %}" class="nav-link active">Library</a></li>
        </ul>
    </footer>
    <script src="{% static 'script.js' %}"></script>
    <script>
        function toggleLibrary() {
            var bookDisplay = document.getElementById('bookDisplay');
            var button = document.querySelector('.book-button');
            if (bookDisplay.style.display === 'none') {
                bookDisplay.style.display = 'block';
                button.textContent = 'Hide Library';
            } else {
                bookDisplay.style.display = 'none';
                button.textContent = 'Display Library';
            }
        }

        function searchBooks() {
            var query = document.getElementById('searchInput').value.toLowerCase();
            var resultsContainer = document.getElementById('searchResults');
            resultsContainer.innerHTML = ''; // Clear previous results

            // Assuming you have a list of books in a variable called 'books'
            var books = [
                { title: 'Book Title 1', author: 'Author 1', rating: '5' },
                { title: 'Book Title 2', author: 'Author 2', rating: '4' },
                // Add more books here
            ];

            var filteredBooks = books.filter(function (book) {
                return book.title.toLowerCase().includes(query) ||
                    book.author.toLowerCase().includes(query);
            });

            if (filteredBooks.length > 0) {
                filteredBooks.forEach(function (book) {
                    var bookElement = document.createElement('div');
                    bookElement.innerHTML = `
                <h3>${book.title}</h3>
                <h3>${book.author}</h3>
                <h3>${book.rating}</h3>
            `;
                    resultsContainer.appendChild(bookElement);
                });
            } else {
                resultsContainer.innerHTML = '<p>No books found.</p>';
            }
        }

        document.addEventListener('DOMContentLoaded', function () {
            var button = document.querySelector('.book-button');
            if (button) {
                button.addEventListener('click', toggleLibrary);
            }

            var searchButton = document.querySelector('.search button');
            if (searchButton) {
                searchButton.addEventListener('click', searchBooks);
            }
        });
    </script>
</body>

</html>